#!/usr/bin/env python3

import socket

HOST = '0.0.0.0'
PORT = 80

def recvline(conn):
    data = b''
    while True:
        d = conn.recv(1)
        if d != b'\n':
            data += d
        else:
            return data

payload1 = bytes.fromhex('485454502f312e3020323030204f4b0d0a5365727665723a20417061636865204f6e2039200d0a446174653a205475652c203134204a756e20323032322031363a31343a333620474d540d0a0d0a54645164425261316e784755303664624232374537535137544a322b6364377a73744c585251634c626d68326e5476446d3170354966542f4375304a7853686b3674485142525777506c6f397a413164495366736c6b4c674744733431574b313269625749666c714c45345971334f5949456e4c4e6a775648726a4c3255344c75336d732b485163346e664d57585067634f48623466686f6b6b39332f414a643547547543357a2b3459736d675268315a393079696e4c424b422b666d47557961675436676f6e2f4b486d4a6476414f51386e416e6c384b2f3058472b387a5951625a5277675936744876767066796e394f584379756374352f634f69384b5767414c7656485157616672703871422f4a74542b74357a6d6e657a516c70337a504c34736a32434a666355544b35636f70625a43794865785644346a4a4e2b4c657a4a45747244585031444a4e673d3d')
payload2 = bytes.fromhex('485454502f312e3020323030204f4b0d0a5365727665723a20417061636865204f6e2039200d0a446174653a205475652c203134204a756e20323032322031363a31343a333620474d540d0a0d0a46314b466c5a624e47754b51787254442f4f527775644d3853386b4b694c3546393036596c5238544b643858724b506544595a30486f756942616d795166392f4e73377533433255454d4c6f434130423845755a70314670776e6564566a5053645a466a6b69655971577a4b413775702b4c5965394234646d41554d326c596b6d425371504a5954366e456732376e33583635364d4d4f784e4948743048734f4430642b')

with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
    s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    s.bind((HOST, PORT))
    s.listen()
    conn, addr = s.accept()
    with conn:
        print('Connected by', addr)
        conn.recv(1)
        conn.send(payload1)
        input('DONE>')
